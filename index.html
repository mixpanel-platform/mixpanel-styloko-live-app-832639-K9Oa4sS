<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/css/reset.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.css">
    <script src="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.js"></script>
  </head>
  <body class="mixpanel-platform-body">
  <center><h1>Total Unique Count per Event</h1></center>
      <script>
       MP.api.query('/api/2.0/events/names').done(function(results) {
          var params = {
              type: 'unique',     
              unit: 'day',        
              interval: 1   
          };
          var today = new Date().toISOString().split('T')[0]
          var eventCollection = {}
          _.each(results, function(eventName) {
            MP.api.events(eventName, params).done(function(results) {
                var cleanedData = {}
                cleanedData[eventName] = {}
                cleanedData[eventName][today] = results[eventName][today]
                _.extend(eventCollection, cleanedData)
                console.log(eventCollection)
            }); 
          });
          
        // $('<div></div>').appendTo('body').MPTable({ 
        //     data: results,
        //     showPercentages: false,
        //     firstColHeader: 'Event Name'
        // });
        });
      </script>
  </body>
</html>
